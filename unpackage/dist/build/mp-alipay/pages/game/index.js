(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/game/index"],{"00a1":function(t,e,i){"use strict";var n=i("2f65"),o=i.n(n);o.a},1190:function(t,e,i){"use strict";(function(t){i("1eb0"),i("921b");n(i("66fd"));var e=n(i("ef42"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("c11b")["createPage"])},"2f65":function(t,e,i){},"30f7":function(t,e,i){"use strict";i.r(e);var n=i("dbd2"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"87e3":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return n})},dbd2:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("6467"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){return i.e("pages/game/share").then(i.bind(null,"0718"))},r={data:function(){return{headerShow:!1,goods_id:"",goodsInfo:{name:"",old:"",new:"",soldOut:"",img:"",id:"",money:""},goods:[],sec:9,startSec:3,isShow:!1,canClick:!0,startFont:"开始",money:"",kan_id:"",child_id:"",unit:"",decade:"",hunders:".",kilbit:"",myriabit:"",debit:"",hunbit:"",ten:"",timer:null,count:0,shareShow:!1,hour:"",minute:"",second:"",endTime:"",userInfo:"",end_time:"",gameOverShow:!1,isFriend:!1,help:[],bottomPrice:"",remark:"注: 请在游戏活动时间结束之前进行购买"}},onLoad:function(e){var i=this;try{if(t.showToast({icon:"loading",title:"数据获取中"}),e.scanCode){this.headerShow=!1,this.isFriend=!0;var o=JSON.parse(e.scanCode);this.kan_id=o.k,this.gameOverShow=!1,this.request({url:n.default.friend_kan,method:"POST",data:{kan_id:o.k},success:function(e){if(1==e.error_code)t.showToast({title:e.data,icon:"none"}),setTimeout(function(){t.navigateTo({url:"../public/login"})},1e3);else if(4==e.error_code)i.gameOverShow=!0;else if(5==e.error_code)i.end(),i.goods=e.goods[0],i.money=e.on_price,i.kan_id=e.kan_id,i.end_time=1e3*e.end_time,i.child_id=e.child_id,i.help=e.help,i.help_Arr(),i.open(),e.on_price<=i.bottomPrice&&(i.money=i.bottomPrice.toFixed(2),i.remark="已经到达最低价,请在活动时间结束前进行购买");else if(0==e.error_code){if(i.goodsInfo.old=e.on_price,i.end_time=1e3*e.end_time,i.open(),e.on_price<=i.bottomPrice)return i.end(),void(i.remark="已经到达最低价,请在活动时间结束前进行购买");i.init()}}})}else{this.bottomPrice=e.bottomPrice;var s=e.goodsId;this.goods_id=e.goodsId;var r=JSON.parse(t.getStorageSync("goodsPrice"));this.headerShow=!0,this.gameOverShow=!1,this.goodsInfo.old=r,this.initData(s)}}catch(h){}},components:{share:s},methods:{initData:function(t){var e=this;this.isFriend=!1,this.request({url:n.default.action_kan,method:"POST",data:{child_id:t},success:function(t){3==t.error_code&&e.init(),5==t.error_code&&(e.end(),e.goods=t.goods[0],e.money=t.on_price,e.kan_id=t.kan_id,e.end_time=1e3*t.end_time,e.child_id=t.child_id,e.help=t.help,e.help_Arr(),e.open(),t.on_price<=e.bottomPrice&&(e.money=e.bottomPrice.toFixed(2),e.remark="已经到达最低价,请在活动时间结束前进行购买"))}})},gameOver:function(t){var e=this;console.log(t),this.request({url:n.default.set_play,method:"POST",data:{child_id:this.goods_id,help_price:t},success:function(t){console.log(t),0==t.error_code&&(e.end(),e.goods=t.guige,e.kan_id=t.kan_id,e.child_id=t.child_id,e.shareShow=!0,e.end_time=1e3*t.end_time,e.money=t.on_price,e.open())}})},help_power:function(t){var e=this;this.request({url:n.default.help_power,method:"POST",data:{kan_id:this.kan_id,help_price:t},success:function(t){console.log(t),0==t.error_code&&(e.end(),e.goods=t.goods[0],e.money=t.on_price,e.kan_id=t.kan_id,e.end_time=1e3*t.end_time,e.child_id=t.child_id,e.open(),t.on_price<=e.bottomPrice&&(e.money=e.bottomPrice.toFixed(2),e.remark="已经到达最低价,请在活动时间结束前进行购买"))}})},help_Arr:function(){var t=this;this.help.forEach(function(e){e.help_time=t.timestampToTime(e.help_time)})},timestampToTime:function(t){var e=t.toString();10==e.length&&(e*=1e3);var i=new Date(e),n=i.getFullYear()+"-",o=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",s=i.getDate()+" ",r=i.getHours()+":",h=i.getMinutes()+":",d=i.getSeconds();return n+o+s+r+h+d},open:function(){var t=this;setInterval(function(){var e=(new Date).getTime(),i=new Date(t.end_time)-e;if(i>0){var n=i/1e3;t.hour=parseInt(n%86400/3600)<10?"0"+parseInt(n%86400/3600):parseInt(n%86400/3600),t.minute=parseInt(n%86400%3600/60)<10?"0"+parseInt(n%86400%3600/60):parseInt(n%86400%3600/60),t.second=parseInt(n%86400%3600%60)<10?"0"+parseInt(n%86400%3600%60):parseInt(n%86400%3600%60),t.ssec=parseInt(i%86400%3600/60)%10}else t.hour="00",t.minute="00",t.second="00"},1e3)},countDown:function(){var t=this;if(3==this.startSec){if(console.log("开始"),!this.canClick)return;this.canClick=!1,this.isShow=!0;var e=this,i=setInterval(function(){e.startSec--,t.startSec<1&&(clearInterval(i),t.canClick=!0,t.isShow=!1,t.startFont="点击",t.start())},1e3)}else this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.minus()},100)},init:function(){this.canClick=!0,this.startFont="开始",this.synth(),this.shareShow=!1,this.sec=9,this.money=this.goodsInfo.old,parseInt(this.goodsInfo.old)===this.goodsInfo.old&&(this.money=this.goodsInfo.old.toFixed(2)),this.single(this.money)},end:function(){this.single(this.goodsInfo.old),this.synth(),this.canClick=!1,this.startFont="结束",this.synth(),this.shareShow=!0,this.sec=0,console.log("结束")},start:function(){var t=this,e=setInterval(function(){if(t.sec--,t.sec<1)if(clearInterval(e),t.canClick=!1,t.startFont="结束",t.synth(),t.isFriend){console.log("好友");var i=parseFloat(t.goodsInfo.old-t.money).toFixed(2);t.help_power(i)}else{console.log("开砍");var n=parseFloat(t.goodsInfo.old-t.money).toFixed(2);t.gameOver(n)}},1e3)},single:function(t){this.money=t.toString().split(""),this.unit=this.money[this.money.length-1],this.decade=this.money[this.money.length-2],this.hunders=this.money[this.money.length-3],this.kilbit=this.money[this.money.length-4],this.myriabit=this.money[this.money.length-5],this.debit=this.money[this.money.length-6],this.hunbit=this.money[this.money.length-7],this.ten=this.money[this.money.length-8]},synth:function(){this.ten?this.money=this.ken+this.hunbit+this.debit+this.myriabit+this.kilbit+this.hunders+this.decade+this.unit:this.hunbit?this.money=this.hunbit.toString()+this.debit.toString()+this.myriabit.toString()+this.kilbit.toString()+this.hunders+this.decade+this.unit:this.debit?this.money=this.debit.toString()+this.myriabit.toString()+this.kilbit.toString()+this.hunders+this.decade+this.unit:this.myriabit?this.money=this.myriabit.toString()+this.kilbit.toString()+this.hunders+this.decade+this.unit:this.kilbit&&(this.money=this.kilbit.toString()+this.hunders+this.decade+this.unit)},minus:function(){this.canClick&&(this.count++,this.unit--,this.unit<=0&&(this.unit=9,this.decade--,this.decade<=0&&(this.decade=9,this.kilbit--,this.kilbit<=0&&(this.kilbit=9,this.myriabit--,this.myriabit<=0&&(this.myriabit=9,this.debit--,this.canClick=!1)))))}}};e.default=r}).call(this,i("c11b")["default"])},ef42:function(t,e,i){"use strict";i.r(e);var n=i("87e3"),o=i("30f7");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("00a1");var r,h=i("f0c5"),d=Object(h["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=d.exports}},[["1190","common/runtime","common/vendor"]]]);