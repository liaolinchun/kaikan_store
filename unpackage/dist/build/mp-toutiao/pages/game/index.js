(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/game/index"],{"00a1":function(t,i,e){"use strict";var o=e("2f65"),n=e.n(o);n.a},1190:function(t,i,e){"use strict";(function(t){e("1eb0"),e("921b");o(e("66fd"));var i=o(e("ef42"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("f266")["createPage"])},"2f65":function(t,i,e){},"30f7":function(t,i,e){"use strict";e.r(i);var o=e("dbd2"),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,function(){return o[t]})}(s);i["default"]=n.a},"3bc5":function(t,i,e){"use strict";var o,n=function(){var t=this,i=t.$createElement;t._self._c},s=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return s}),e.d(i,"a",function(){return o})},dbd2:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("6467"));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){return e.e("pages/game/share").then(e.bind(null,"0718"))},h={data:function(){return{headerShow:!1,goods_id:"",goodsInfo:{name:"",old:"",new:"",soldOut:"",img:"",id:"",money:""},goods:[],sec:9,startSec:3,isShow:!1,canClick:!0,startFont:"开始",money:"",kan_id:"",child_id:"",unit:"",decade:"",hunders:".",kilbit:"",myriabit:"",debit:"",hunbit:"",ten:"",timer:null,count:0,shareShow:!1,hour:"",minute:"",second:"",endTime:"",userInfo:"",end_time:"",gameOverShow:!1,isFriend:!1,help:[],bottomPrice:"",remark:"注: 请在游戏活动时间结束之前进行购买",you:""}},onLoad:function(i){var e=this;try{if(t.showToast({icon:"loading",title:"数据获取中"}),i.scanCode){this.headerShow=!1,this.isFriend=!0;var n=JSON.parse(i.scanCode);this.kan_id=n.k,this.gameOverShow=!1,this.you=n.y,this.request({url:o.default.friend_kan,method:"POST",data:{kan_id:n.k},success:function(i){if(console.log(i),1==i.error_code)t.showToast({title:"请先去登录",icon:"none",duration:1e3}),setTimeout(function(){t.navigateTo({url:"../public/login"})},1200);else if(4==i.error_code)e.gameOverShow=!0;else if(5==i.error_code)e.end(),e.goods=i.goods[0],e.money=i.on_price,e.kan_id=i.kan_id,e.end_time=1e3*i.end_time,e.child_id=i.child_id,e.help=i.help,e.help_Arr(),e.open(),parseFloat(i.on_price)<=parseFloat(e.bottomPrice)&&(e.money=e.bottomPrice.toFixed(2),e.remark="已经到达最低价,请在活动时间结束前进行购买");else if(0==i.error_code){if(e.goodsInfo.old=i.on_price,e.end_time=1e3*i.end_time,e.open(),parseFloat(i.on_price)<=parseFloat(e.bottomPrice))return e.end(),void(e.remark="已经到达最低价,请在活动时间结束前进行购买");console.log("123"),e.init(),console.log("456")}}})}else{this.bottomPrice=i.bottomPrice,this.you=i.you;var s=i.goodsId;this.goods_id=i.goodsId;var h=JSON.parse(t.getStorageSync("goodsPrice"));this.headerShow=!0,this.gameOverShow=!1,this.goodsInfo.old=h,console.log(this.goodsInfo.old),this.initData(s)}}catch(r){}},components:{share:s},onShareAppMessage:function(t){var i={k:this.kan_id,g:this.child_id,y:this.you};return t.from,{title:this.goods.title,path:"/pages/game/index?scanCode="+JSON.stringify(i),imageUrl:"http://www.tiktokshopee.com"+this.goods.thumbimg}},methods:{initData:function(t){var i=this;this.isFriend=!1,this.request({url:o.default.action_kan,method:"POST",data:{child_id:t},success:function(t){3==t.error_code&&i.init(),5==t.error_code&&(i.end(),i.goods=t.goods[0],i.money=t.on_price,i.kan_id=t.kan_id,i.end_time=1e3*t.end_time,i.child_id=t.child_id,i.help=t.help,i.help_Arr(),i.open(),parseFloat(t.on_price)<=parseFloat(i.bottomPrice)&&(i.money=i.bottomPrice.toFixed(2),i.remark="已经到达最低价,请在活动时间结束前进行购买"))}})},gameOver:function(t){var i=this;console.log(t),this.request({url:o.default.set_play,method:"POST",data:{child_id:this.goods_id,help_price:t},success:function(t){console.log(t),0==t.error_code&&(i.end(),i.goods=t.guige,i.kan_id=t.kan_id,i.child_id=t.child_id,i.shareShow=!0,i.end_time=1e3*t.end_time,i.money=t.on_price,i.open())}})},help_power:function(t){var i=this;this.request({url:o.default.help_power,method:"POST",data:{kan_id:this.kan_id,help_price:t},success:function(t){console.log(t),0==t.error_code&&(i.end(),i.goods=t.goods[0],i.kan_id=t.kan_id,i.child_id=t.child_id,i.shareShow=!0,i.end_time=1e3*t.end_time,i.money=t.on_price,i.open(),parseFloat(t.on_price)<=parseFloat(i.bottomPrice)&&(i.money=i.bottomPrice.toFixed(2),i.remark="已经到达最低价,请在活动时间结束前进行购买"))}})},help_Arr:function(){var t=this;this.help.forEach(function(i){i.help_time=t.timestampToTime(i.help_time)})},timestampToTime:function(t){var i=t.toString();10==i.length&&(i*=1e3);var e=new Date(i),o=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",s=e.getDate()+" ",h=e.getHours()+":",r=e.getMinutes()+":",a=e.getSeconds();return o+n+s+h+r+a},open:function(){var t=this;setInterval(function(){var i=(new Date).getTime(),e=new Date(t.end_time)-i;if(e>0){var o=e/1e3;t.hour=parseInt(o%86400/3600)<10?"0"+parseInt(o%86400/3600):parseInt(o%86400/3600),t.minute=parseInt(o%86400%3600/60)<10?"0"+parseInt(o%86400%3600/60):parseInt(o%86400%3600/60),t.second=parseInt(o%86400%3600%60)<10?"0"+parseInt(o%86400%3600%60):parseInt(o%86400%3600%60),t.ssec=parseInt(e%86400%3600/60)%10}else t.hour="00",t.minute="00",t.second="00"},1e3)},countDown:function(){var t=this;if(3==this.startSec){if(console.log("开始"),!this.canClick)return;this.canClick=!1,this.isShow=!0;var i=this,e=setInterval(function(){i.startSec--,t.startSec<1&&(clearInterval(e),t.canClick=!0,t.isShow=!1,t.startFont="点击",t.start())},1e3)}else this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.minus()},100)},init:function(){this.canClick=!0,this.startFont="开始",this.synth(),this.shareShow=!1,this.sec=9,this.goodsInfo.old=+this.goodsInfo.old,this.money=this.goodsInfo.old.toFixed(2),parseInt(this.goodsInfo.old)===this.goodsInfo.old&&(this.money=this.goodsInfo.old.toFixed(2)),this.single(this.money)},end:function(){this.single(this.goodsInfo.old),this.synth(),this.canClick=!1,this.startFont="结束",this.synth(),this.shareShow=!0,this.sec=0,console.log("结束")},start:function(){var t=this,i=setInterval(function(){if(t.sec--,t.sec<1)if(clearInterval(i),t.canClick=!1,t.startFont="结束",t.synth(),t.isFriend){console.log("好友");var e=parseFloat(t.goodsInfo.old-t.money).toFixed(2);t.help_power(e)}else{console.log("开砍");var o=parseFloat(t.goodsInfo.old-t.money).toFixed(2);t.gameOver(o)}},1e3)},single:function(t){this.money=t.toString().split(""),this.unit=this.money[this.money.length-1],this.decade=this.money[this.money.length-2],this.hunders=this.money[this.money.length-3],this.kilbit=this.money[this.money.length-4],this.myriabit=this.money[this.money.length-5],this.debit=this.money[this.money.length-6],this.hunbit=this.money[this.money.length-7],this.ten=this.money[this.money.length-8]},synth:function(){this.ten?this.money=this.ken+this.hunbit+this.debit+this.myriabit+this.kilbit+this.hunders+this.decade+this.unit:this.hunbit?this.money=this.hunbit.toString()+this.debit.toString()+this.myriabit.toString()+this.kilbit.toString()+this.hunders+this.decade+this.unit:this.debit?this.money=this.debit.toString()+this.myriabit.toString()+this.kilbit.toString()+this.hunders+this.decade+this.unit:this.myriabit?this.money=this.myriabit.toString()+this.kilbit.toString()+this.hunders+this.decade+this.unit:this.kilbit&&(this.money=this.kilbit.toString()+this.hunders+this.decade+this.unit)},minus:function(){if(this.canClick)if(this.count++,this.unit>0)this.unit--;else if(this.unit=9,this.decade>0)this.decade--;else if(this.decade=9,this.kilbit>0)this.kilbit--;else if(this.kilbit=9,this.myriabit>0)this.myriabit--;else if(this.debit>0)this.myriabit=9,this.debit--;else if(this.hunbit>0)this.myriabit=9,this.debit=9,this.hunbit--,console.log(this.bebit,this.myriabit,this.hunbit);else{if(!(this.ten>0))return;this.debit=9,this.hunbit=9,this.myriabit=9,this.ten--}}}};i.default=h}).call(this,e("f266")["default"])},ef42:function(t,i,e){"use strict";e.r(i);var o=e("3bc5"),n=e("30f7");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("00a1");var h,r=e("f0c5"),a=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],h);i["default"]=a.exports}},[["1190","common/runtime","common/vendor"]]]);