(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"05e2":function(e,t,n){"use strict";n.r(t);var r=n("155e"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t["default"]=o.a},"155e":function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("a34a")),a=i(n("6467"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)})}}var c=function(){return Promise.all([n.e("common/vendor"),n.e("components/popupPay")]).then(n.bind(null,"70e2"))},d={data:function(){return{orderNav:["全部","待付款","代发货","待收货","已完成"],showOrderIndex:0,showOrder:[],orderLists:[],dfk_order:[],dfh_order:[],dsh_order:[],end_order:[],loadingText:"正在加载....",loading:!0,showPay:!1,sum:""}},components:{popupPay:c},onShow:function(){},methods:{showOrderNav:function(e){switch(this.showOrderIndex=e,e){case 0:this.showOrder=this.orderLists;break;case 1:this.showOrder=this.dfk_order;break;case 2:this.showOrder=this.dfh_order;break;case 3:this.showOrder=this.dsh_order;break;case 4:this.showOrder=this.end_order;break}},initData:function(){var t=u(o.default.mark(function t(){var n=this;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.request({url:a.default.all_order,method:"POST",success:function(t){e("log",t," at pages\\order\\order.vue:94"),0==t.error_code&&(n.orderLists=t.data,n.showOrder=t.data,t.data.forEach(function(e){e.time=n.timestampToTime(e.time)}),n.dfk_order=t.data.filter(function(e){return"待付款"===e.state_name}),n.dfh_order=t.data.filter(function(e){return"待发货"===e.state_name}),n.dsh_order=t.data.filter(function(e){return"待收货"===e.state_name}),n.end_order=t.data.filter(function(e){return"已完成"===e.state_name}),n.loading=!1)}});case 1:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),navTo:function(t){e("log",t.iconTitle," at pages\\order\\order.vue:126"),"待付款"==t.state_name?r.navigateTo({url:"../pay/toPay?goodsInfo="+JSON.stringify(t)}):"待收货"==t.state_name||"待发货"==t.state_name?r.navigateTo({url:"../pay/endOrder?goodsInfo="+JSON.stringify(t)}):"已完成"==t.state_name&&r.navigateTo({url:"../pay/endOrder?goodsInfo="+JSON.stringify(t)})},toSale:function(e){r.navigateTo({url:"./base/afterSale"})},toComment:function(e){if("已完成"!=e.state_name)return"待付款"==e.state_name?(this.sum=e.price,this.showPay=!0,void this.$refs.Series.Payment()):void("提醒发货"==e.iconTitle?(r.showLoading({title:"发送中..."}),setTimeout(function(){r.hideLoading(),setTimeout(function(){r.showToast({icon:"success",title:"已成功提示商家"})},200)},1e3)):"删除订单"==e.iconTitle?r.showModal({title:"删除",content:"确定要删除订单吗？",cancelText:"否",confirmText:"是",success:function(e){}}):"确认收货"==e.iconTitle&&r.showModal({title:"确认收货",content:"确定订单吗？",cancelText:"否",confirmText:"是",success:function(e){setTimeout(function(){r.showToast({icon:"success",title:"订单已完成"})},200)}}));r.navigateTo({url:"./base/orderComment?goodsInfo="+JSON.stringify(e)})},setPay:function(e){this.showPay=e},timestampToTime:function(e){var t=e.toString();10==t.length&&(t*=1e3);var n=new Date(t),r=n.getFullYear()+"-",o=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",a=n.getDate()+" ",i=n.getHours()+":",s=n.getMinutes()+":",u=n.getSeconds();return r+o+a+i+s+u}},onLoad:function(){this.initData()}};t.default=d}).call(this,n("0de9")["default"],n("6e42")["default"])},"2d29":function(e,t,n){"use strict";n.r(t);var r=n("61bf"),o=n("05e2");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("bf4d");var i,s=n("f0c5"),u=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);t["default"]=u.exports},"61bf":function(e,t,n){"use strict";var r,o=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return r})},"846c":function(e,t,n){"use strict";(function(e){n("1eb0"),n("921b");r(n("66fd"));var t=r(n("2d29"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"9c60":function(e,t,n){},bf4d:function(e,t,n){"use strict";var r=n("9c60"),o=n.n(r);o.a}},[["846c","common/runtime","common/vendor"]]]);